## Об Live-Cover
Это проект позволяющий создавать динамические обложки для сообщест Вконтакте. Имеет визуальный конструктор обложки с 23 различными виджетами.

Среди самых популярных виджетов можно выжелить: последний подписчик, лучший лайкер/репостер/комментатор, погода, новости и именниники. Есть несколько виджетов для интеграции с каналом на YouTube: последнее видео, информация о канале, видео по ссылке.

--------

## Установка
### Этап 1 - установка зависимостей и т.д.

1) [**NodeJs 6.x**](https://nodejs.org/en/). Данная версия считатеся устаревшей, из-за чего могут возникнуть сложности с ее установкой, поэтому рекомендую сразу ознакомится с [этой статьей](https://www.digitalocean.com/community/tutorials/node-js-ubuntu-16-04-ru#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%B8-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D0%B8-nvm)
2) [**node-gyp**](https://github.com/nodejs/node-gyp#installation) - понадобится для установки некоторых модулей
3) установите зависимости [**node-canvas**](https://github.com/Automattic/node-canvas#compiling)
4) установите [**MySQL**](https://dev.mysql.com/doc/mysql-installation-excerpt/5.7/en/) и создайте новую базу данных
5) скопируйте файлы из репозитория


### Этап 2 - базовые настройки
Любым текстовым редактором откройте файл конфига -`/config/index.js` в нем неодходимо заполнить различные данные которые нужны для работы приложения. Большинство настроек можно проигнорировать, но это означает что связанный с ними функционал не будет работать. Дальше только об обязательных настройках.

**порт** - указывайте лубой
**настройки для базы данных** - нужно указать хост БД (обычно localhost), имя базы, имя пользователя и пароль

**Данные для работы с vk** (тут нужно рассказать подробней)

На [этой странице](https://vk.com/editapp?act=create) создайте приложение "Веб-сайт". В качестве домена можно указать `localhost`. Перейдите в "настройки" и перенесите "ID приложения" и "Защищённый ключ" в соотвествующие места в файле конфига.

Для доступа к функционалу администратора в файлах `app/routes/index.js` и `views/sidebar.ejs` найдите цифры 696969696 и засените их на свой id (цифрами) из вконтакте.


### Этап 3 - первый запуск
1) Откройте в терминале/консоли папку в которую вы скопиовали файлы `cd ПУТЬ_К_ПАПКЕ`
2) выполните команду `npm install` и дождитесь окончания установки
3) выполните команду `node clearDb.js`

На этом все!

Теперь можете попробывать запустить приложение командой `node app.js`. При всех последующих запусках используйте эту же команду.

--------

## Настройка приема платежей
Для настройки систем приема платежей, приложение live-cover уже должно быть развернуто на сервере и иметь подключенный домен. Рекомендованные сервера смотрите в разделе [Полезные ссылки](https://github.com/soofft91/live-cover#%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8)

### Free-Kassa

1) Пройдите [регистрацию](http://www.free-kassa.ru/merchant/register.php?pid=3d5a5f89eaa0c7a70ffecaed2982bc2f)
2) перейдите в раздел [настройками мерчанта](http://www.free-kassa.ru/cabinet/v2/settings)
3) в шапке сайта есть небольшой блок вида: _ID - 11111 http://site.ru_. Скопируйте цифры вашего идентификатора и вставьте в переменную "free_kassa_id" файла конфига

**ИЗМЕНЕНИЯ ТЕХНИЧЕСКОЙ ИНФОРМАЦИИ:**

4) нажмите на иконку обновления в полях "секретное слово" и "секретное слово 2". Сгенерированные коды вставьте в переменные "free_kassa_secret_1" и "free_kassa_secret_2" файла конфига
5) в поле "URL оповещения" вставьте `SITE.RU/payments/free_kassa/`
6) "URL возврата в случае успеха" и "URL возврата в случае неудачи" настройте по своему желанию, для теста можно просто указать главную страницу сайта
7) "подтвержение платежа" - поставьте "требуется"
8) нажмите кнопку сохранить

Настройки ниже можете менять по своему усмотрению!

--------

## Полезные ссылки:
- [**digitalocean**](https://m.do.co/c/40da495fe57c) - сервер для вашего приложения, если надоест использовать локально
- [**webhost1**](https://webhost1.ru/?r=12684) - еще один хостер, но уже русский. Только не напутайте - вам нужен виртуальный сервер, а не хостинг
- [**PM2**](https://github.com/Unitech/pm2) - запуск приложения в фоне и многое другое
- [**nodemon**](https://www.npmjs.com/package/nodemon) - авто перезагрузка приложения при изменении его файлов. Мастхэв при разработке
- [**node-canvas**](https://www.npmjs.com/package/canvas) - документация библиотеки ответственной за "рисование" в проекте
- [**vk-io**](https://www.npmjs.com/package/vk-io) - библиотека для работы с [vk api](https://vk.com/dev/methods)
